<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="org.sample.se.BoardDAO">
	
	<select id="getBoardItem" resultType="Board">
		SELECT 
			boardNum,
			boardid,
			title,
			content,
			readcount,
			regdate, 
			memberid
		FROM board WHERE 
			boardid = #{boardid}
	</select>
	<update id="hitUpdateBoard" parameterType="int">
		<![CDATA[ update board set readcount = readcount+1 where boardid=#{boardid} ]]>
	</update>
	
	<select id="getBoardList" resultType="Board">
		SELECT 
			boardNum,
			boardid,
			title,
			content,
			readcount,
			regdate, 
			memberid
		FROM board 
		<!-- 	<if test="searchOption != null">
				AND ${searchOption} LIKE CONCAT('%',#{searchInput},'%')
			</if> 
		ORDER BY boardid DESC	
		LIMIT #{currentItem } , #{itemPerPage} -->
	</select>
	
	<select id="countBoardList" resultType="Integer">
		SELECT 
			COUNT(*)
		FROM 
			board
		WHERE 1=1
			<!-- <if test="searchOption != null">
				AND ${searchOption} LIKE CONCAT('%',#{searchInput},'%')
			</if> 	 -->
	</select>

	<insert id="insertBoardItem" parameterType="Board" useGeneratedKeys="true" keyProperty="boardid">
		<selectKey keyProperty="boardid" resultType="Integer"  order="BEFORE">
			SELECT NVL(MAX(boardid),0) + 1 FROM BOARD
		</selectKey>
	    INSERT INTO 
			BOARD(boardid , boardnum, readcount, title, content, regdate, author)
		VALUES(#{boardid},#{boardNum}, #{readcount},#{title}, #{content}, sysdate , #{author} )
	</insert>

	<update id="updateBoardItem" parameterType="Board">
		UPDATE
			BOARD
		SET
			title = #{title},
			content = #{content}
		WHERE 
			boardid = #{boardid}
	</update>
	
	<update id="deleteBoardItem" parameterType="Board">
		
	</update>
	
</mapper>	
